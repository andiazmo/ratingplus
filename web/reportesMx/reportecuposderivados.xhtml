<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/template.xhtml">

    <ui:define name="title">
        <h:outputText value="Reporte de Cupos linea Derivados por Cliente"/>
    </ui:define>

    <ui:define name="body">
        <h:form id="reportederivadListForm">
            <p:panel header="Reporte Listado de clientes con Cupo en la linea Derivados">
                             
                <h:commandLink>
                    <p:graphicImage url="//img/excel.png" width="24"/>
                    <p:dataExporter type="xls" target="reportederivadosexp" fileName="ReporteCupoDerivados" />
                </h:commandLink>
                <h:commandLink>
                    <p:graphicImage url="//img/csv.png" width="24"/>
                    <p:dataExporter type="csv" target="reportederivadosexp" fileName="ReporteCupoDerivados" />
                </h:commandLink> 
                 <h:commandLink>
                    <p:graphicImage url="//img/pdf.png" width="24"/>
                    <p:dataExporter type="pdf" target="reportederivadosexp" fileName="ReporteCupoDerivados"/>
                </h:commandLink>
 
                
                <p:dataTable id="reportederivados"
                             value="#{clientesController.clientesCupoDerivados}"
                             var="item"
                             rowKey="#{item.nit}"
                             >

                    <p:column    filterBy="#{item.nit}" style=" width:100px;" >
                        <f:facet name="header">
                            <h:outputText value="Nit"/>
                        </f:facet>
                        <h:outputText value="#{item.nit}"/>
                    </p:column>

                    <p:column  filterBy="#{item.cliente}" style=" width:100px " >
                        <f:facet name="header">
                            <h:outputText value="Cliente"/>
                        </f:facet>
                        <h:outputText value="#{item.cliente}"/>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="UsoCupo % "/>

                        </f:facet>
                        <h:outputText value="#{item.usocupo}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column filterBy="#{item.nivel}" style=" width:100px ">
                        <f:facet name="header">
                            <h:outputText value="Nivel"/>

                        </f:facet>
                        <h:outputText value="#{item.nivel}"/>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="Limite Total"/>
                        </f:facet>
                        <h:outputText value="#{item.cupototal}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="Cupo Utilizado"/>
                        </f:facet>
                        <h:outputText value="#{item.cupoconsumido}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>
                    <p:column  >
                        <f:facet name="header">
                            <h:outputText value="Limite Disponible"/>
                        </f:facet>
                        <h:outputText value="#{item.cupodisponible}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="Plazo"/>
                        </f:facet>
                        <h:outputText value="#{item.plazo}"/>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="Fecha Vencimiento"/>
                        </f:facet>
                        <h:outputText value="#{item.fechavencimiento}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </p:column>

                    <p:column >
                        <f:facet name="header">
                            <h:outputText value="Dias para Vencimiento"/>
                        </f:facet>
                        <h:outputText value="#{item.diasparavencimiento}" />
                    </p:column>
                    
                    <p:column filterBy="#{item.estado}" style=" width:100px; ">
                        <f:facet name="header">
                            <h:outputText value="Estado"/>
                        </f:facet>
                           <h:outputText value="#{item.estado}" />
                    </p:column>
                </p:dataTable>

              <p:dataTable id="reportederivadosexp"
                             value="#{clientesController.clientesCupoDerivados}"
                             var="item"
                             rowKey="#{item.nit}"
                             
                              >

                    <p:column    filterBy="#{item.nit}" style=" width:100px; display: none" >
                        <f:facet name="header">
                            <h:outputText value="Nit"/>
                        </f:facet>
                        <h:outputText value="#{item.nit}"/>
                    </p:column>

                    <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Cliente"/>
                        </f:facet>
                        <h:outputText value="#{item.cliente}"/>
                    </p:column>

                    <p:column style="display: none" >
                        <f:facet name="header">
                            <h:outputText value="UsoCupo % "/>

                        </f:facet>
                        <h:outputText value="#{item.usocupo}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Nivel"/>

                        </f:facet>
                        <h:outputText value="#{item.nivel}"/>
                    </p:column>

                    <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Limite Total"/>
                        </f:facet>
                        <h:outputText value="#{item.cupototal}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Cupo Utilizado"/>
                        </f:facet>
                        <h:outputText value="#{item.cupoconsumido}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>
                    <p:column style="display: none" >
                        <f:facet name="header">
                            <h:outputText value="Limite Disponible"/>
                        </f:facet>
                        <h:outputText value="#{item.cupodisponible}">
                            <f:convertNumber     maxFractionDigits="2" />
                        </h:outputText>
                    </p:column>

                    <p:column style="display: none" >
                        <f:facet name="header">
                            <h:outputText value="Plazo"/>
                        </f:facet>
                        <h:outputText value="#{item.plazo}"/>
                    </p:column>

                    <p:column style="display: none" >
                        <f:facet name="header">
                            <h:outputText value="Fecha Vencimiento"/>
                        </f:facet>
                        <h:outputText value="#{item.fechavencimiento}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </p:column>

                    <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Dias para Vencimiento"/>
                        </f:facet>
                        <h:outputText value="#{item.diasparavencimiento}" />
                    </p:column>
                    
                       <p:column style="display: none">
                        <f:facet name="header">
                            <h:outputText value="Estado"/>
                        </f:facet>
                           <h:outputText value="#{item.estado}" />
                    </p:column>
                </p:dataTable>
<ui:include src="/confirmation.xhtml"/>

            </p:panel>
        </h:form>   
    </ui:define>

</ui:composition>